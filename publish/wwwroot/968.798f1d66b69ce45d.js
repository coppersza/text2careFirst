"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[968],{7968:(F,m,s)=>{s.r(m),s.d(m,{TokenModule:()=>J});var a=s(9808),T=s(4466),p=s(5020);class g{constructor(){this.storeId=0,this.productTypeId=0,this.sort="name",this.pageNumber=1,this.pageSize=3}}var e=s(4893),d=s(520),u=s(4004),l=s(9646),f=s(1118),_=s(2340);let h=(()=>{class o{constructor(t){this.http=t,this.baseUrl=_.N.apiUrl,this.tokens=[],this.stores=[],this.productTypes=[],this.pagination=new f._,this.tokenParams=new g,this.tokenCache=new Map}getTokens(t){if(!1===t&&(this.tokenCache=new Map),this.tokenCache.size>0&&t&&this.tokenCache.has(Object.values(this.tokenParams).join("-")))return this.pagination.data=this.tokenCache.get(Object.values(this.tokenParams).join("-")),(0,l.of)(this.pagination);let n=new d.LE;return 0!==this.tokenParams.storeId&&(n=n.append("storeId",this.tokenParams.storeId.toString())),0!==this.tokenParams.productTypeId&&(n=n.append("productTypeId",this.tokenParams.productTypeId.toString())),this.tokenParams.search&&(n=n.append("search",this.tokenParams.search)),n=n.append("sort",this.tokenParams.sort),n=n.append("pageIndex",this.tokenParams.pageNumber.toString()),n=n.append("pageSize",this.tokenParams.pageSize.toString()),this.http.get(this.baseUrl+"tokencontrolleruser",{observe:"response",params:n}).pipe((0,u.U)(r=>(this.tokenCache.set(Object.values(this.tokenParams).join("-"),r.body.data),this.pagination=r.body,this.pagination)))}setTokenParams(t){this.tokenParams=t}getTokenParams(){return this.tokenParams}getToken(t){let n;return this.tokenCache.forEach(r=>{n=r.find(c=>c.id===t)}),n||n?(0,l.of)(n):this.http.get(this.baseUrl+"tokencontrolleruser/"+t)}getStores(){return this.stores.length>0?(0,l.of)(this.stores):this.http.get(this.baseUrl+"store").pipe((0,u.U)(t=>(this.stores=t,t)))}getProductTypes(){return this.productTypes.length>0?(0,l.of)(this.productTypes):this.http.get(this.baseUrl+"product/producttype").pipe((0,u.U)(t=>(this.productTypes=t,t)))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var k=s(2382),v=s(1654);let C=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-token-item"]],inputs:{token:"token"},decls:15,vars:10,consts:[[1,"card","card-body","flex-fill"],[1,"img-fluid",2,"object-fit","cover","object-position","center","width","300px","height","300px","border","none 0px #CCC",3,"src","alt"],[3,"routerLink"],[1,"text-uppercase"],["type","button",1,"btn","btn-primary",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"a",2)(3,"h5",3),e._uU(4),e.qZA()(),e.TgZ(5,"h6",3),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA(),e.TgZ(12,"div")(13,"button",4),e._uU(14,"View"),e.qZA()()()),2&t&&(e.xp6(1),e.s9C("src",n.token.imageUrl,e.LSH),e.s9C("alt",n.token.tokenName),e.xp6(1),e.MGl("routerLink","/token/",n.token.id,""),e.xp6(2),e.Oqu(n.token.tokenName),e.xp6(2),e.Oqu(n.token.storeName),e.xp6(2),e.hij("Created : ",e.lcZ(9,8,n.token.dateCreated),""),e.xp6(3),e.hij("Type : ",n.token.productTypeName,""),e.xp6(2),e.MGl("routerLink","/token/",n.token.id,""))},directives:[p.yS,p.rH],pipes:[a.uU],styles:[".btn[_ngcontent-%COMP%]{width:80%;height:50px}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(255,255,255,.5);opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translate(-20px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{transform:translate(20px)}"]}),o})();var Z=s(6241);const x=["search"];function y(o,i){if(1&o&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&o){const t=i.$implicit,n=e.oxw(2);e.Q6J("selected",n.tokenParams.sort===t.value)("value",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function P(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).onStoreSelected(c.id)}),e._uU(1),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw(2);e.ekj("active",t.id===n.tokenParams.storeId),e.Q6J("value",t.id),e.xp6(1),e.hij("",t.storeName," ")}}function b(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).onProductTypeSelected(c.id)}),e._uU(1),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw(2);e.ekj("active",t.id===n.tokenParams.productTypeId),e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function S(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"h5",14),e._uU(2,"Sort"),e.qZA(),e.TgZ(3,"select",15),e.NdJ("change",function(r){return e.CHM(t),e.oxw().onSortSelected(r.target.value)}),e.YNc(4,y,2,3,"option",16),e.qZA(),e.TgZ(5,"h5",17),e._uU(6,"Shops"),e.qZA(),e.TgZ(7,"ul",18),e.YNc(8,P,2,4,"li",19),e.qZA(),e.TgZ(9,"h5",17),e._uU(10,"Types"),e.qZA(),e.TgZ(11,"ul",18),e.YNc(12,b,2,4,"li",19),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.sortOptions),e.xp6(4),e.Q6J("ngForOf",t.stores),e.xp6(4),e.Q6J("ngForOf",t.productTypes)}}function A(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",22)(1,"input",23,24),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().onSearch()}),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSearch()}),e._uU(4,"Search"),e.qZA(),e.TgZ(5,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e._uU(6,"Reset"),e.qZA()()}}function U(o,i){if(1&o&&(e.TgZ(0,"div",27),e._UZ(1,"app-token-item",28),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("token",t)}}function N(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"app-pager",30),e.NdJ("pageChanged",function(r){return e.CHM(t),e.oxw().onPageChanged(r)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("pageSize",t.tokenParams.pageSize)("totalCount",t.totalCount)("pageNumber",t.tokenParams.pageNumber)}}let O=(()=>{class o{constructor(t){this.tokenService=t,this.sortOptions=[{name:"Alphabetical",value:"name"},{name:"Date: Low to High",value:"dateAsc"},{name:"Date: High to Low ",value:"dateDesc"}],this.tokenParams=this.tokenService.getTokenParams()}ngOnInit(){this.getTokens(!0),this.getStores(),this.getProductTypes()}getTokens(t=!1){this.tokenService.getTokens(t).subscribe(n=>{this.tokens=n.data,this.totalCount=n.count},n=>{console.log(n)})}getStores(){this.tokenService.getStores().subscribe(t=>{this.stores=[{id:0,storeName:"All",description:"",imageUrl:"",country:"",fullName:""},...t]},t=>{console.log(t)})}getProductTypes(){this.tokenService.getProductTypes().subscribe(t=>{this.productTypes=t,this.productTypes=[{id:0,name:"All",description:""},...t]},t=>{console.log(t)})}onStoreSelected(t){const n=this.tokenService.getTokenParams();n.storeId=t,n.pageNumber=1,this.tokenService.setTokenParams(n),this.getTokens()}onProductTypeSelected(t){const n=this.tokenService.getTokenParams();n.productTypeId=t,n.pageNumber=1,this.tokenService.setTokenParams(n),this.getTokens()}onSortSelected(t){const n=this.tokenService.getTokenParams();n.sort=t,this.tokenService.setTokenParams(n),this.getTokens()}onPageChanged(t){const n=this.tokenService.getTokenParams();n.pageNumber!==t&&(n.pageNumber=t,this.tokenService.setTokenParams(n),this.getTokens(!0))}onSearch(){const t=this.tokenService.getTokenParams();t.search=this.searchValue.nativeElement.value,t.pageNumber=1,this.tokenService.setTokenParams(t),this.getTokens()}onReset(){this.searchValue.nativeElement.value="",this.tokenParams=new g,this.tokenService.setTokenParams(this.tokenParams),this.getTokens()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-token"]],viewQuery:function(t,n){if(1&t&&e.Gf(x,5),2&t){let r;e.iGM(r=e.CRH())&&(n.searchValue=r.first)}},decls:15,vars:7,consts:[[1,"container","mt-2"],[1,"row"],[1,"col-3"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageSize","pageNumber"],["class","form-inline",4,"ngIf"],[1,"container"],[1,"row","my-4"],[1,"col"],[1,"container-fluid"],["class","col-sm d-flex",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"text-warning","ml-3","mt-4","mb-2"],[1,"custom-select","mb-2",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"text-warning","ml-3"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item",3,"value","click"],[1,"form-inline"],["placeholder","Search","type","text",1,"form-control","mr-2",2,"width","300px",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","my-2",3,"click"],[1,"btn","btn-outline-success","ml-2","my-2",3,"click"],[1,"col-sm","d-flex"],[3,"token"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageNumber","pageChanged"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"section",2),e.YNc(3,S,13,3,"ng-container",3),e.qZA(),e.TgZ(4,"section",4)(5,"div",5),e._UZ(6,"app-paging-header",6),e.YNc(7,A,7,0,"div",7),e.qZA(),e.TgZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",1),e.YNc(13,U,2,1,"div",12),e.qZA()()()()(),e.YNc(14,N,2,3,"div",13),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.stores&&n.productTypes),e.xp6(3),e.Q6J("totalCount",n.totalCount)("pageSize",n.tokenParams.pageSize)("pageNumber",n.tokenParams.pageNumber),e.xp6(1),e.Q6J("ngIf",n.tokens),e.xp6(6),e.Q6J("ngForOf",n.tokens),e.xp6(1),e.Q6J("ngIf",n.totalCount&&n.totalCount>0))},directives:[a.O5,a.sg,k.YN,k.Kr,v.U,C,Z.P],styles:["img[_ngcontent-%COMP%]{object-fit:scale-down;background-size:contain;height:300px;background-color:#fff;color:#fff}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:#e95620c2;border-radius:10px}"]}),o})();var q=s(9957);function M(o,i){if(1&o&&(e.TgZ(0,"div",2)(1,"div",3),e._UZ(2,"img",4),e.qZA(),e.TgZ(3,"div",3)(4,"h1"),e._uU(5),e.qZA(),e.TgZ(6,"h5"),e._uU(7,"Recipient"),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"h5"),e._uU(11,"Recipient Name"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.qZA(),e.TgZ(14,"h5"),e._uU(15,"Date Created"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"h5"),e._uU(20,"Date Assigned"),e.qZA(),e.TgZ(21,"p"),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"h5"),e._uU(25,"Date Collected"),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.ALo(28,"date"),e.qZA(),e.TgZ(29,"h5"),e._uU(30,"Store"),e.qZA(),e.TgZ(31,"p"),e._uU(32),e.qZA(),e.TgZ(33,"h5"),e._uU(34,"Cost Price"),e.qZA(),e.TgZ(35,"p"),e._uU(36),e.ALo(37,"currency"),e.qZA(),e.TgZ(38,"p"),e._uU(39),e.qZA()(),e.TgZ(40,"div",5),e._UZ(41,"div",6),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.s9C("src",t.token.imageUrl,e.LSH),e.s9C("alt",t.token.tokenName),e.xp6(3),e.Oqu(t.token.tokenName),e.xp6(4),e.Oqu(t.token.recipient),e.xp6(4),e.Oqu(t.token.recipientName),e.xp6(4),e.Oqu(e.lcZ(18,11,t.token.dateCreated)),e.xp6(5),e.Oqu(e.lcZ(23,13,t.token.dateAssigned)),e.xp6(5),e.Oqu(e.lcZ(28,15,t.token.dateCollected)),e.xp6(5),e.Oqu(t.token.storeName),e.xp6(4),e.Oqu(e.lcZ(37,17,t.token.costPrice)),e.xp6(3),e.hij("Type : ",t.token.productTypeName,"")}}const w=[{path:"",component:O},{path:":id",component:(()=>{class o{constructor(t,n,r){this.tokenService=t,this.activatedRoute=n,this.breadCrumbService=r,this.breadCrumbService.set("@tokenDetails"," ")}ngOnInit(){this.loadToken()}loadToken(){this.tokenService.getToken(+this.activatedRoute.snapshot.paramMap.get("id")).subscribe(t=>{this.token=t,this.breadCrumbService.set("@tokenDetails",t.tokenName)},t=>{console.log(t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h),e.Y36(p.gz),e.Y36(q.pm))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-token-details"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[1,"row","mt-5"],[1,"col-12","ml-3"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,M,42,19,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.token))},directives:[a.O5],pipes:[a.uU,a.H9],styles:[""]}),o})(),data:{breadcrumb:{alias:"tokenDetails"}}}];let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(w)],p.Bz]}),o})(),J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[a.ez,T.m,I]]}),o})()}}]);